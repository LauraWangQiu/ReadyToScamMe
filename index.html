<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Face Scan Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 30px;
            position: relative;
        }

        .demo-badge {
            background: #ff6b6b;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.02);
            }
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }

        .consent-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .consent-box h2 {
            color: #667eea;
            font-size: 18px;
            margin-bottom: 10px;
        }

        .consent-box p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .consent-box ul {
            margin-left: 20px;
            color: #555;
            line-height: 1.8;
        }

        .video-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            margin: 0 auto 20px;
            border-radius: 10px;
            overflow: hidden;
            background: #000;
        }

        #video {
            width: 100%;
            height: auto;
            display: block;
        }

        .scan-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .scan-line {
            position: absolute;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, #00ff00, transparent);
            box-shadow: 0 0 20px #00ff00;
            top: 0;
            display: none;
        }

        .scan-line.active {
            display: block;
            animation: scan 2s linear infinite;
        }

        @keyframes scan {
            0% {
                top: 0;
            }
            100% {
                top: 100%;
            }
        }

        .face-frame {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 250px;
            height: 300px;
            border: 3px solid #00ff00;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            display: none;
            box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
        }

        .face-frame.active {
            display: block;
            animation: frameGlow 1.5s ease-in-out infinite;
        }

        @keyframes frameGlow {
            0%, 100% {
                opacity: 0.6;
                box-shadow: 0 0 30px rgba(0, 255, 0, 0.5);
            }
            50% {
                opacity: 1;
                box-shadow: 0 0 50px rgba(0, 255, 0, 0.8);
            }
        }

        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        button:active {
            transform: translateY(0);
        }

        .btn-start {
            background: #00c853;
            color: white;
        }

        .btn-start:hover {
            background: #00a844;
        }

        .btn-pause {
            background: #ff9800;
            color: white;
        }

        .btn-pause:hover {
            background: #e68900;
        }

        .btn-export {
            background: #2196f3;
            color: white;
        }

        .btn-export:hover {
            background: #0b7dda;
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .message {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }

        .message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            display: block;
        }

        .scan-status {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin-top: 15px;
            min-height: 30px;
        }

        .scan-status.scanning {
            color: #00c853;
            font-weight: bold;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 15px;
            display: none;
        }

        .progress-bar.active {
            display: block;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00c853, #00ff88);
            width: 0%;
            transition: width 0.3s ease;
        }

        .info-section {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .info-section h3 {
            color: #1976d2;
            margin-bottom: 10px;
        }

        .info-section p {
            color: #555;
            line-height: 1.6;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="demo-badge">
            ‚ö†Ô∏è DEMO ‚Äî NO REAL PAYMENT ‚ö†Ô∏è
        </div>

        <h1>Face Scan Demo</h1>

        <div class="consent-box">
            <h2>üìã Consent & Privacy Notice</h2>
            <p><strong>Before proceeding, please read and understand:</strong></p>
            <ul>
                <li>This is a <strong>demonstration only</strong> - no actual payment processing occurs</li>
                <li>Your camera access is requested solely to display a live video preview</li>
                <li>All video processing happens <strong>locally in your browser</strong></li>
                <li>No video data, images, or personal information is sent to any server</li>
                <li>No data is stored or recorded</li>
                <li>You can deny camera access and the demo will show an error message</li>
                <li>You can revoke camera access at any time through your browser settings</li>
            </ul>
            <p style="margin-top: 10px;"><em>By clicking "Start Scan", you consent to camera access for this demonstration.</em></p>
        </div>

        <div class="video-container">
            <video id="video" autoplay playsinline></video>
            <div class="scan-overlay">
                <div class="scan-line" id="scanLine"></div>
                <div class="face-frame" id="faceFrame"></div>
            </div>
        </div>

        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="scan-status" id="scanStatus">Ready to begin</div>

        <div class="controls">
            <button class="btn-start" id="startBtn" onclick="startScan()">Start Scan</button>
            <button class="btn-pause" id="pauseBtn" onclick="pauseScan()" disabled>Pause</button>
            <button class="btn-export" id="exportBtn" onclick="exportData()" disabled>Export Demo Data</button>
        </div>

        <div id="message" class="message"></div>

        <div class="info-section">
            <h3>‚ÑπÔ∏è How This Demo Works</h3>
            <p>
                This demonstration simulates a face-scanning interface similar to what might be used in biometric payment systems.
                When you click "Start Scan", your browser will request camera permission. Once granted, you'll see your camera feed
                with animated scanning effects. After a few seconds, a mock "success" message will appear. The "Export" button 
                generates a sample JSON file with simulated (fake) scan data. Remember: this is purely educational and no real 
                processing, authentication, or payment occurs.
            </p>
        </div>
    </div>

    <script>
        let stream = null;
        let isScanning = false;
        let isPaused = false;
        let scanProgress = 0;
        let scanInterval = null;

        const video = document.getElementById('video');
        const scanLine = document.getElementById('scanLine');
        const faceFrame = document.getElementById('faceFrame');
        const scanStatus = document.getElementById('scanStatus');
        const message = document.getElementById('message');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const exportBtn = document.getElementById('exportBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');

        async function startScan() {
            try {
                showMessage('Requesting camera access...', 'info');
                
                // Request camera access
                stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { 
                        width: { ideal: 1280 },
                        height: { ideal: 720 },
                        facingMode: 'user'
                    } 
                });
                
                video.srcObject = stream;
                
                // Update UI
                showMessage('Camera access granted! Starting scan...', 'success');
                startBtn.disabled = true;
                pauseBtn.disabled = false;
                exportBtn.disabled = true;
                
                // Start scanning animation
                isScanning = true;
                isPaused = false;
                scanProgress = 0;
                progressBar.classList.add('active');
                scanLine.classList.add('active');
                faceFrame.classList.add('active');
                scanStatus.textContent = 'Scanning...';
                scanStatus.classList.add('scanning');
                
                // Simulate scan progress
                scanInterval = setInterval(() => {
                    if (!isPaused && scanProgress < 100) {
                        scanProgress += 2;
                        progressFill.style.width = scanProgress + '%';
                        
                        if (scanProgress >= 100) {
                            completeScan();
                        }
                    }
                }, 100);
                
            } catch (error) {
                console.error('Camera access error:', error);
                showMessage('Camera access denied or unavailable. Please check your browser permissions.', 'error');
                scanStatus.textContent = 'Camera access failed';
                resetUI();
            }
        }

        function pauseScan() {
            if (!isScanning) return;
            
            isPaused = !isPaused;
            
            if (isPaused) {
                pauseBtn.textContent = 'Resume';
                scanLine.classList.remove('active');
                scanStatus.textContent = 'Scan paused';
                scanStatus.classList.remove('scanning');
                showMessage('Scan paused. Click Resume to continue.', 'info');
            } else {
                pauseBtn.textContent = 'Pause';
                scanLine.classList.add('active');
                scanStatus.textContent = 'Scanning...';
                scanStatus.classList.add('scanning');
                showMessage('Scan resumed...', 'info');
            }
        }

        function completeScan() {
            clearInterval(scanInterval);
            scanLine.classList.remove('active');
            faceFrame.classList.remove('active');
            isScanning = false;
            
            scanStatus.textContent = '‚úÖ Scan Complete!';
            scanStatus.classList.remove('scanning');
            scanStatus.style.color = '#00c853';
            
            showMessage('üéâ Mock Scan Success! Face scan simulation completed. (This is a demo - no actual data was captured or processed)', 'success');
            
            pauseBtn.disabled = true;
            exportBtn.disabled = false;
            startBtn.disabled = false;
            startBtn.textContent = 'Scan Again';
        }

        function exportData() {
            // Generate mock data (completely fake, for demonstration only)
            const mockData = {
                demo: true,
                disclaimer: "This is simulated data for demonstration purposes only. No real biometric data was captured.",
                timestamp: new Date().toISOString(),
                scanDuration: "5.0 seconds",
                status: "mock_success",
                mockBiometricPoints: [
                    { id: 1, x: 0.42, y: 0.38, type: "left_eye" },
                    { id: 2, x: 0.58, y: 0.38, type: "right_eye" },
                    { id: 3, x: 0.50, y: 0.52, type: "nose_tip" },
                    { id: 4, x: 0.50, y: 0.68, type: "mouth_center" }
                ],
                mockConfidenceScore: 0.9523,
                note: "All values are randomly generated for demo purposes"
            };
            
            // Create and download JSON file
            const dataStr = JSON.stringify(mockData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'demo-face-scan-data.json';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showMessage('Demo data exported! Check your downloads folder for "demo-face-scan-data.json"', 'success');
        }

        function showMessage(text, type) {
            message.textContent = text;
            message.className = 'message ' + type;
        }

        function resetUI() {
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            exportBtn.disabled = true;
            scanLine.classList.remove('active');
            faceFrame.classList.remove('active');
            progressBar.classList.remove('active');
        }

        // Cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        });
    </script>
</body>
</html>
